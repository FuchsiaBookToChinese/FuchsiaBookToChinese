### Packages

### 包

**Build packages** are defined in JSON files which can be found at:

* Garnet Layer Packages: [`//garnet/packages/`][garnet-packages-source].
* Peridot Layer Packages: [`//peridot/packages/`][peridot-packages-source].
* Topaz Layer Packages: [`//topaz/packages/`][topaz-packages-source].

**构建包**在JSON文件中定义，这些定义文件被存放在如下位置:

* Garnet层包文件: [`//garnet/packages/`][garnet-packages-source].
* Peridot层包文件: [`//peridot/packages/`][peridot-packages-source].
* Topaz层包文件: [`//topaz/packages/`][topaz-packages-source].


Build packages are a Fuchsia-specific feature built on top of GN to help
customize Fuchsia builds.

“构建包”是Fuchsia的一个特性，这些包在GN的顶层被构建，可用于Fuchsia的自定义构建。

A build package file contains references to other build packages it expands
on (`imports`) and the Fuchsia packages it adds to the build (`packages`):

“构建包”文件包含了对于其他构建包的引用（由`imports`定义）和指定加入构建的包（由`packages`定义）：

```json
{
    "imports": [
        "garnet/packages/prod/network”,
    ],
    "packages": [
        "//garnet/examples/http/wget"
    ]
}
```

Build packages define an aggregation of one or more build labels, either by
importing other packages, or by referencing build labels. GN [parses the JSON
package definitions][preprocess-build-packages-py] early on in the build
(often referenced from [product definitions][products], and those definitions
determine what else GN has to do.

“构建包”定义了一个构建标签的集合，这个集合可以由一个或者多个构建标签组成。
这些标签或者导入了其他的包，或者引用了其他的构建标签。
GN在构建的开始阶段[解析了JSON格式的包定义][preprocess-build-packages-py]
（通常在[product定义][products]中被引用），这些定义决定了GN还需要做哪些其他的操作。

**Fuchsia packages**, not to be confused with build packages, are artifacts
of the Fuchsia build system, generated by the GN targets listed in `packages`.
A Fuchsia package includes a manifest of its contents, and zero or more
executables and their assets.

**Fuchsia包**不同于“构建包”，是Fuchsia构建系统的生成产物，由列举在 `packages` 中的GN目标来生成。
“Fuchsia包”包括一个描述其内容的清单文件，以及可能存在的可执行文件和相关资源文件。

For example, the above build packages file adds a Fuchsia package called
"wget" to the build. This package contains the binaries built
from the build target of the same name in `//garnet/examples/http/wget/BUILD.gn`:

例如，上文所述的“构建包”文件为Fuchsia构建添加了一个名为“wget”的“Fuchsia包”。这个“Fuchsia包”
包含了从 `//garnet/examples/http/wget/BUILD.gn` 中的同名的构建目标构建而来的二进制文件。

```py
package("wget") {
  deps = [
    # The path to the dependency that creates the wget binary.
    ":bin"
  ],
  binaries = [{
    name = "wget"
  }]
}
```

The `binaries` field in the package definition specifies that this package
includes a single binary named `wget`. The `binaries` field does not create
the binary--that's the job of the package's dependencies list, specified in
`deps`:

上述包定义中的 `binaries` 字段指定了这个包含有一个名为 `wget` 的二进制文件。 `binaries` 字段
不会负责创建二进制文件————这个工作由包的依赖列表来负责，相关内容定义在 `deps` 字段中：

```py
# Executable defines a c++ binary, the label of the executable target will
# be the same as the name of the produced binary file.
executable("bin") {
  output_name = "wget"

  sources = [
    "wget.cc",
  ]

  deps = [
    # This executable also has its own dependencies.
    "//garnet/public/lib/app/cpp",
    "//garnet/public/lib/fidl/cpp",
  ]
}
```

The `binaries` field in a `package` target lets GN know to deploy the
binary within Fuchsia when you boot your Fuchsia OS image, allowing you
to run your binary from inside the Fuchsia shell:

`package` 目标中的 `binaries` 字段使得GN可以在用户启动Fuchsia系统镜像时部署二进制文件，
使得用户可以在Fuchsia的shell内运行这些二进制文件：

```bash
$ wget google.com
--2018-06-13 17:04:44--  http://google.com/
$
```

[garnet-packages-source]: https://fuchsia.googlesource.com/garnet/+/master/packages/
[peridot-packages-source]: https://fuchsia.googlesource.com/peridot/+/master/packages/
[topaz-packages-source]: https://fuchsia.googlesource.com/topaz/+/master/packages/
[preprocess-build-packages-py]: https://fuchsia.googlesource.com/build/+/master/gn/prepreprocess_build_packages.py
[products]: products.md
